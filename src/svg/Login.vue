<!--
 * @Author: ChillyBlaze
 * @Date: 2022-05-11 14:12:40
 * @LastEditTime: 2022-05-15 17:07:08
 * @FilePath: /front-end/src/views/Login/svg/Login.vue
 * @Description: 登录面
-->

<template>
	<Transition
		:appear="true"
		@beforeEnter="beforeEnter"
		@enter="enter"
		@leave="leave"
	>
		<svg
			v-if="flag"
			xmlns="http://www.w3.org/2000/svg"
			xmlns:xlink="http://www.w3.org/1999/xlink"
			version="1.1"
			viewBox="0 0 35.8515625 75.59375"
		>
			<path
				id="ani-login-fill"
				d="M7.58984,17.0938L7.58984,26.3164L8.19922,26.3164C8.70312,26.3164,9.24219,26.2344,9.71094,26.1289C10.7188,27.582,11.5508,29.8203,11.5859,31.8008C15.1484,34.9297,19.25,27.8398,10.47266,25.8594C11.2578,25.5664,11.8438,25.1914,11.8438,25.0039L11.8438,24.1133L23.6797,24.1133L23.6797,25.7539L24.4414,25.7539C25.8477,25.7539,28.0039,25.0039,28.0391,24.7812L28.0391,18.7461C28.7188,18.6055,29.1523,18.3242,29.3398,18.0664L25.2734,14.9141L23.3281,17.0938L12.0547,17.0938L8.42188,15.6055C9.67578,14.7148,10.7891,13.7188,11.8438,12.7461L12.0898,13.6133L23.3633,13.6133C23.8672,13.6133,24.2188,13.4258,24.3359,13.0625Q22.8945,11.7266,20.5156,9.92188L18.4648,12.5938L11.9844,12.5938C14.3281,10.35547,16.050800000000002,7.78906,17.2695,5C18.1016,4.89453,18.4648,4.82422,18.7109,4.46094L14.832,1.0625L12.5234,3.33594L4.63672,3.33594L4.96484,4.34375L12.5938,4.34375C11.9844,6.18359,11.1875,7.92969,10.14453,9.58203C9.96875,8.1875,8.23438,6.71094,3.80469,6.59375L3.55859,6.81641C4.74219,7.82422,5.86719,9.66406,6.00781,11.3516C6.875,11.9961,7.76562,12.1367,8.49219,11.9258C6.37109,14.6094,3.66406,17.0938,0.5,18.8164L0.78125,19.25C3.34766,18.4648,5.60938,17.4219,7.58984,16.1445L7.58984,17.0938Z
			M21.5938,25.5664C21.1602,27.6523,20.3398,30.7227,19.6484,32.8438L1.71875,32.8438L2.01172,33.8633L33.3711,33.8633C33.9102,33.8633,34.3086,33.6758,34.4141,33.2773Q32.7617,31.7656,29.9844,29.4922L27.5352,32.8438L20.5508,32.8438C22.4609,31.3555,24.4414,29.375,25.7305,28.0625C26.5625,28.1445,26.9609,27.8398,27.1016,27.3945L21.5938,25.5664Z
			M30.5938,5.84375C29.8086,7.10938,28.2617,9.04297,26.7852,10.5195C25.625,9.66406,24.582,8.69141,23.5742,7.64844C25.6602,6.81641,27.7578,5.73828,29.2227,4.80078C30.0195,4.98828,30.3828,4.83594,30.5586,4.46094L26.3516,1.61328C25.6602,2.97266,24.2188,5.14062,22.8594,6.81641C21.3828,4.95312,20.1523,2.86719,19.3672,0.5L18.8633,0.7578119999999999C20.8789,9.76953,25.2734,15.3008,31.4609,19.1094C32.175799999999995,17.1406,33.4766,15.793,35.2461,15.5703L35.3516,15.1016C32.7617,14.1055,30.1953,12.8516,27.8633,11.2812C29.8789,10.6367,31.9648,9.80469,33.4414,9.07812C34.2383,9.26562,34.5547,9.125,34.7773,8.76172L30.5938,5.84375Z
			M11.8438,23.0938L11.8438,18.1484L23.6797,18.1484L23.6797,23.0938L11.8438,23.0938Z"
			/>
			<path
				id="ani-login-stroke"
				d="M5.67969,55.9922L5.39844,56.25C6.875,57.7266,8.52734,60.1992,8.99609,62.3789C12.9219,65.0742,16.1562,57.2461,5.67969,55.9922Z
			M30.3125,50.7656L27.793,53.8359L27.2422,53.8359L27.6758,44.4961C28.4023,44.3789,28.6836,44.2734,28.9766,43.8984L24.7695,40.6992L23.0352,42.8438L5.21094,42.8438L5.53906,43.8633L23.3281,43.8633L23.0703,48.5508L6.28906,48.5508L6.61719,49.5938L23.0352,49.5938L22.8242,53.8359L1.214844,53.8359L1.50781,54.8438L15.6172,54.8438L15.6172,62.0508C9.60547,64.7812,3.95703,67.207,1.4375,68.0977L4.67188,72.3984C5.07031,72.1875,5.36328,71.7891,5.39844,71.3203C9.78125,68.2148,13.1328,65.6016,15.6172,63.5156L15.6172,69.8203C15.6172,70.2656,15.4414,70.4883,14.8672,70.4883Q14.0352,70.4883,10.10938,70.2656L10.10938,70.5938C12.0547,70.8984,12.8867,71.4023,13.4609,72.0352C14.0352,72.7617,14.2461,73.7695,14.3281,75.0938C19.1445,74.7422,19.8711,72.7969,19.8711,69.9258L19.8711,56.6367C21.957,65.2969,25.8125,69.5156,31.25,72.6914C31.707,70.7109,32.9023,69.1523,34.5195,68.7422L34.625,68.3203C31.1328,67.3125,27.4297,65.6719,24.4414,62.7305C26.8555,61.6406,29.3398,60.2578,31.0273,59.1797C31.8594,59.3672,32.210899999999995,59.1797,32.4336,58.8398L27.9688,55.7109C27.1367,57.3164,25.3438,59.9297,23.7148,61.9453C22.0977,60.1172,20.7266,57.832,19.8711,54.9609L19.8359,54.8438L33.875,54.8438C34.4141,54.8438,34.7773,54.668,34.8828,54.2695Q33.1484,52.8164,30.3125,50.7656Z "
			/>
		</svg>
	</Transition>
</template>

<script setup lang="ts">
	import { enterFS, leaveFS } from '../hooks/in-out'
	import gsap from 'gsap'
	defineProps<{
		flag: boolean
	}>()

	function beforeEnter(el: HTMLElement) {
		let v = el.querySelector('#ani-login-stroke')!
		gsap.set(v, {
			'--stroke-width': '1',
			strokeOpacity: 1,
			fill: 'transparent',
			strokeDasharray: 335,
			strokeDashoffset: 335,
		})
		v = el.querySelector('#ani-login-fill')!
		gsap.set(v, {
			fill: 'transparent',
			strokeOpacity: 1,
			strokeDasharray: 403,
			strokeDashoffset: 403,
		})
	}

	function enter(el: Element, done: () => void) {
		let s = el.querySelector('#ani-login-stroke')!
		let f = el.querySelector('#ani-login-fill')!
		enterFS(s, f, 210, done)
	}

	function leave(el: Element, done: () => void) {
		let s = el.querySelector('#ani-login-stroke')!
		let f = el.querySelector('#ani-login-fill')!
		leaveFS(s, f, done)
	}
</script>

<style scoped lang="scss">
	@import '@/assets/mixin.scss';
	svg {
		@include pagePara;
		--stroke-width: 1px;
		stroke: var(--font-color);
		fill-rule: evenodd;
		#ani-login-fill {
			stroke-width: var(--stroke-width);
		}
		#ani-login-stroke {
			stroke-width: var(--stroke-width);
		}
	}
</style>
